From 732d973027f0f8a2dcd521207eec73169fdab324 Mon Sep 17 00:00:00 2001
From: Jeffy Chen <jeffy.chen@rock-chips.com>
Date: Tue, 11 Dec 2018 10:48:36 +0800
Subject: [PATCH] waylandsink: Support place below/above

Set environment WAYLANDSINK_PLACE_ABOVE=1 to place it above parent.

Signed-off-by: Jeffy Chen <jeffy.chen@rock-chips.com>
---
 ext/wayland/wlwindow.c | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/ext/wayland/wlwindow.c b/ext/wayland/wlwindow.c
index c64c77a..10ea0b9 100644
--- a/ext/wayland/wlwindow.c
+++ b/ext/wayland/wlwindow.c
@@ -24,6 +24,8 @@
 #include <config.h>
 #endif
 
+#include <stdlib.h>
+
 #include "wlwindow.h"
 #include "wlshmallocator.h"
 #include "wlbuffer.h"
@@ -195,6 +197,11 @@ gst_wl_window_new_in_surface (GstWlDisplay * display,
       window->area_surface, parent);
   wl_subsurface_set_desync (window->area_subsurface);
 
+  if (getenv("WAYLANDSINK_PLACE_ABOVE"))
+    wl_subsurface_place_above(window->area_subsurface, parent);
+  else
+    wl_subsurface_place_below(window->area_subsurface, parent);
+
   return window;
 }
 
-- 
2.11.0

